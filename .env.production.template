# CFV Metrics Agent - Production Environment Configuration
# Copy this file to .env.production and fill in your actual values

# ============================================================================
# API Configuration
# ============================================================================
API_PORT=3000
NODE_ENV=production

# ============================================================================
# Database Configuration
# ============================================================================
# For Railway: These will be auto-injected, but you can override them here
# For other hosting: Fill in your MySQL credentials

DB_HOST=your_mysql_host_here
DB_PORT=3306
DB_USER=your_mysql_user_here
DB_PASSWORD=your_mysql_password_here
DB_NAME=cfv_metrics

# ============================================================================
# API Keys (REQUIRED)
# ============================================================================

# CoinGecko API Key
# Get from: https://www.coingecko.com/en/api/pricing
# Free Demo: 30 calls/min, 10,000 calls/month
# Pro ($129/mo): 500 calls/min, unlimited calls
COINGECKO_API_KEY=your_coingecko_api_key_here

# ============================================================================
# Optional API Keys
# ============================================================================

# 3xpl Blockchain Explorer API
# Get from: https://3xpl.com/api
# Cost: $50-200/month depending on usage
# Leave empty to skip 3xpl integration
THREEXPL_API_KEY=

# OpenAI API Key (for AI research features)
# Get from: https://platform.openai.com/api-keys
# Cost: Pay-as-you-go, ~$20/month for typical usage
# Leave empty to skip AI research
OPENAI_API_KEY=

# Etherscan API Key (for Ethereum blockchain data)
# Get from: https://etherscan.io/apis
# Free tier: 5 calls/second
# Leave empty to skip Etherscan integration
ETHERSCAN_API_KEY=

# BlockCypher API Token (for Dash blockchain data)
# Get from: https://www.blockcypher.com/
# Free tier: 3 calls/second, 200 requests/hour
# Leave empty to use without token (limited rate)
BLOCKCYPHER_API_TOKEN=

# ============================================================================
# Collection Settings
# ============================================================================

# How often to collect data (in minutes)
# Recommended: 60 (hourly), 1440 (daily)
COLLECTION_INTERVAL_MINUTES=60

# Delay between API calls to respect rate limits (milliseconds)
# CoinGecko Demo: 5000ms (12 calls/min)
# CoinGecko Pro: 1000ms (60 calls/min)
DELAY_BETWEEN_COINS_MS=5000

# Maximum retry attempts for failed requests
MAX_RETRIES=3

# Delay before retrying failed requests (milliseconds)
RETRY_DELAY_MS=2000

# ============================================================================
# Logging Configuration
# ============================================================================

# Log level: error, warn, info, debug
# Production: info or warn
# Development: debug
LOG_LEVEL=info

# Enable detailed logging for debugging
# true = verbose logs, false = minimal logs
DEBUG_MODE=false

# ============================================================================
# Performance Settings
# ============================================================================

# Enable Redis caching (requires Redis server)
# true = use Redis, false = in-memory cache only
ENABLE_REDIS=false

# Redis connection URL (if ENABLE_REDIS=true)
# Format: redis://username:password@host:port/database
REDIS_URL=redis://localhost:6379

# Cache TTL (Time To Live) in seconds
CACHE_TTL_SHORT=1800      # 30 minutes (price data)
CACHE_TTL_MEDIUM=3600     # 1 hour (transaction data)
CACHE_TTL_LONG=86400      # 24 hours (community data)

# ============================================================================
# Security Settings
# ============================================================================

# Enable API authentication (future feature)
ENABLE_AUTH=false

# API key for accessing the CFV Metrics Agent API
# Generate with: openssl rand -hex 32
API_KEY=

# Allowed origins for CORS
# Comma-separated list of origins
# Example: https://cfv-calculator.vercel.app,https://example.com
ALLOWED_ORIGINS=*

# ============================================================================
# Monitoring & Alerting
# ============================================================================

# Sentry DSN for error tracking
# Get from: https://sentry.io
# Leave empty to disable Sentry
SENTRY_DSN=

# Enable health check endpoint
ENABLE_HEALTH_CHECK=true

# Health check interval (seconds)
HEALTH_CHECK_INTERVAL=60

# ============================================================================
# Railway-Specific Configuration
# ============================================================================
# These are auto-injected by Railway, no need to set manually

# Railway MySQL connection
# DB_HOST=${{MYSQL.RAILWAY_PRIVATE_DOMAIN}}
# DB_PORT=${{MYSQL.RAILWAY_TCP_PROXY_PORT}}
# DB_USER=${{MYSQL.MYSQLUSER}}
# DB_PASSWORD=${{MYSQL.MYSQLPASSWORD}}

# Railway public URL
# PUBLIC_URL=${{RAILWAY_PUBLIC_DOMAIN}}

# ============================================================================
# Notes
# ============================================================================
# 
# 1. NEVER commit this file with actual API keys to git
# 2. Use Railway/Vercel environment variable UI to set production values
# 3. For local development, copy to .env and fill in test values
# 4. Rotate API keys regularly for security
# 5. Monitor API usage to avoid unexpected costs
#
# ============================================================================
